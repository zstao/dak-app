"use strict";requirejs.config({paths:{axios:"/bower_components/axios/dist/axios.amd",CONF:"/dist/scripts/config",userStore:"/dist/scripts/components/user-store",emailStore:"/dist/scripts/components/email-store",jquery:"/bower_components/jquery/dist/jquery.min",zepto:"/bower_components/zepto/zepto.min",bootstrap:"/bower_components/bootstrap/dist/js/bootstrap.min",toast:"/dist/scripts/components/toast",_:"/bower_components/lodash/lodash.min",validator:"/bower_components/validator-js/validator.min",utils:"/dist/scripts/utils/utils",simditor:"/statics/libs/simditor/dist/simditor",simditorModule:"/statics/libs/simditor/dist/module",simditorHotkeys:"/statics/libs/simditor/dist/hotkeys",simditorUploader:"/statics/libs/simditor/dist/uploader",editor:"/dist/scripts/components/editor"},shim:{bootstrap:{deps:["jquery"]}}}),requirejs(["CONF","_","jquery","validator","userStore","emailStore","axios","bootstrap","toast"],function(t,o,i,e,s,a,n,r,d){function l(t){return C.fadeIn(200),a.getEmails(t).then(function(t){return C.fadeOut(300),t})}function m(t){var o,e=[];t=t||[],console.log(t),t.forEach(function(t){o=z(t),e.push(o),k.append(i(o))})}function c(t,o){u=t,_=o,O.html(o.topic),S.html(o.sender),F.html(o.content),I.empty(),o.tags&&o.tags.length>0&&o.tags.forEach(function(t){p(t)})}function p(t){var o=i("<div>"),e=i("<span>");o.addClass("email__tag label label-primary inline-block"),o.attr("data-tag",t),e.text(t),o.append(e),I.append(o)}{var u,_,f=".",b="--active",h="tab-navs__item",v="main-body__tab",g=v+b,w=h+b,y=i(".tab-navs"),j=i(f+v),q=i(f+w),x=i(f+g),C=i(".loader-indicator"),k=i(".email-rows"),z=o.template(i("#tpl__email").html()),E=i("#modal__email-viewer"),O=i(".modal__email-topic"),S=i(".modal__email-sender"),F=i(".modal__email-content"),I=i(".email__tags-holder"),N=i(".modal__confirm-btn");i(".email__handler-editor-wrapper"),i("#email-creator-wrapper")}setTimeout(function(){i(window).resize()},20),y.on("click",".tab-navs__item",function(t){t.preventDefault();var o,e=i(t.target);e.is(f+w)||(e.addClass(w),q.length>0&&q.removeClass(w),x.length>0&&x.removeClass(g),q=e,o=e.index(),x=j.eq(e.index()),x.addClass(g))}),k.on("click","tr",function(t){var o=i(t.currentTarget);C.fadeIn(200),a.getEmail(o.data("id")).then(function(t){t=t.data,c(o,t),E.modal(),C.fadeOut(200)},function(t){console.log(t)})}),l().then(function(t){m(t.data)}),N.on("click",function(){d.show("处理成功")})});