"use strict";!function(){function t(){c.style.display="none",n()?f.removeAttribute("disabled"):f.setAttribute("disabled","disabled")}function e(t){c.innerHTML=t,c.style.display="block"}function n(){return h.test(l.value)&&v.test(d.value)}function o(){return n()?{username:l.value,password:d.value}:null}function i(t){return axios.post(m,t)}function r(t){var e=Object.keys(t);e.forEach(function(e){window.sessionStorage.setItem(e,t[e])})}function a(){window.sessionStorage.clear()}var s=document.querySelector.bind(document),u=s(".login-form"),l=s(".username"),d=s(".password"),c=s(".login-error"),f=s(".login-btn"),m="http://192.168.15.44:8001/auth/login";m="http://192.168.0.144:8001/auth/login";var h=/^\w[-\w]{2,20}$/,v=/^\w[-\w]{4,20}$/,w={admin:"root-manage.html",dispatcher:"dispatcher.html",handler:"handler.html"};l.addEventListener("input",t),d.addEventListener("input",t),u.addEventListener("submit",function(t){t.preventDefault();var n=o();n.to="/views/root-manage.html";i(n).then(function(t){t=t.data||{},console.log(t);var n=w[t.user_role];n?(r(t),window.location.href=n):(a(),e(t.message||""))},function(t){console.log(t)})})}();